#!/bin/bash
# AtlasPi Menu Access Script

REPO_DIR="$HOME/atlaspi"  # Dynamically uses the home directory
VENV_DIR="$REPO_DIR/venv"

# Check if AtlasPi is installed
if [ ! -d "$REPO_DIR" ]; then
    echo "AtlasPi not found. Please run setup first."
    exit 1
fi

# Check if service is running
if systemctl is-active --quiet atlaspi; then
    echo "AtlasPi service is running in background."
    echo "This menu will let you control the service and view status."
    echo -e "\nPress Ctrl+C to exit and return to shell.\n"
else
    echo "AtlasPi service is not running."
    echo "Starting interactive menu session..."
    echo -e "\nPress Ctrl+C to exit and return to shell.\n"
fi

# Activate the environment and run the menu
cd "$REPO_DIR"
source "$VENV_DIR/bin/activate"
python setup.py